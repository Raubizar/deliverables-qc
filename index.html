<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drawing QC</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
    <!-- Progress Bar -->
    <div id="progress-bar" class="progress-bar hidden">
        <div class="progress-fill"></div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <h1>Deliverables QC</h1>
        </div>
    </header>

    <main class="main-content">
        <!-- Input Files Card -->
        <div class="card fade-slide-in">
            <div class="card-header">
                <h2 class="card-title">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14,2 14,8 20,8"/>
                        <line x1="16" y1="13" x2="8" y2="13"/>
                        <line x1="16" y1="17" x2="8" y2="17"/>
                        <polyline points="10,9 9,9 8,9"/>
                    </svg>
                    Input Files
                </h2>
            </div>
            <div class="card-content">
                <div class="input-grid">
                    <!-- Folder Selection -->
                    <div class="input-row">
                        <div class="input-icon">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
                            </svg>
                        </div>
                        <div class="input-label">Select Folder</div>
                        <div class="input-description">Root folder of files</div>
                        <div class="input-control">
                            <button id="folder-btn" class="btn btn-outline">Choose Folder</button>
                        </div>
                    </div>

                    <!-- Include Subfolders -->
                    <div class="input-row">
                        <div class="input-icon">â†³</div>
                        <div class="input-label">Include sub-folders</div>
                        <div class="input-description">Tick to recurse (default ON)</div>
                        <div class="input-control">
                            <input type="checkbox" id="subfolders" checked class="checkbox">
                        </div>
                    </div>

                    <!-- Register File -->
                    <div class="input-row">
                        <div class="input-icon">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                <polyline points="14,2 14,8 20,8"/>
                            </svg>
                        </div>
                        <div class="input-label">Register.xlsx</div>
                        <div class="input-description">Drawing register</div>
                        <div class="input-control">
                            <input type="file" id="register-file" accept=".xlsx,.xls" class="file-input">
                        </div>
                    </div>

                    <!-- Naming Rules File -->
                    <div class="input-row">
                        <div class="input-icon">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M12 20h9"/>
                                <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
                            </svg>
                        </div>
                        <div class="input-label">Naming-Rules.xlsx</div>
                        <div class="input-description">Allowed file-name parameters</div>
                        <div class="input-control">
                            <input type="file" id="naming-file" accept=".xlsx,.xls" class="file-input">
                        </div>
                    </div>

                    <!-- Title Blocks File -->
                    <div class="input-row">
                        <div class="input-icon">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M12 19l7-7 3 3-7 7-3-3z"/>
                                <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/>
                                <path d="M2 2l7.586 7.586"/>
                                <circle cx="11" cy="11" r="2"/>
                            </svg>
                        </div>
                        <div class="input-label">Title-Blocks.xlsx</div>
                        <div class="input-description">Title-block export</div>
                        <div class="input-control">
                            <input type="file" id="titleblock-file" accept=".xlsx,.xls" class="file-input">
                        </div>
                    </div>
                </div>

                <div class="run-checks-section">
                    <button id="run-checks" class="btn btn-primary btn-large" disabled>Run Checks</button>
                </div>
            </div>
        </div>

        <!-- Summary Card -->
        <div id="summary-card" class="card fade-slide-in hidden">
            <div class="card-header">
                <h2 class="card-title">Summary</h2>
            </div>
            <div class="card-content">
                <div class="summary-grid">
                    <div class="gauge-section">
                        <div class="circular-gauge">
                            <svg class="gauge-svg" viewBox="0 0 120 120">
                                <circle class="gauge-bg" cx="60" cy="60" r="52"/>
                                <circle class="gauge-progress" cx="60" cy="60" r="52"/>
                            </svg>
                            <div class="gauge-content">
                                <div class="gauge-percentage">87%</div>
                                <div class="gauge-label">Compliant</div>
                            </div>
                        </div>
                    </div>
                    <div class="metrics-section">
                        <div class="metric-card">
                            <div class="metric-header">
                                <span class="metric-title">Drawings scanned</span>
                                <div class="tooltip-trigger">
                                    <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                        <circle cx="12" cy="12" r="10"/>
                                        <path d="M9 9h5v5"/>
                                        <path d="M15 9l-6 6"/>
                                    </svg>
                                    <div class="tooltip">Count of files processed</div>
                                </div>
                            </div>
                            <div class="metric-value">245</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-header">
                                <span class="metric-title">Missing vs expected</span>
                                <div class="tooltip-trigger">
                                    <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                        <circle cx="12" cy="12" r="10"/>
                                        <path d="M9 9h5v5"/>
                                        <path d="M15 9l-6 6"/>
                                    </svg>
                                    <div class="tooltip">From Register.xlsx</div>
                                </div>
                            </div>
                            <div class="metric-content">
                                <div class="metric-value">8 missing</div>
                                <div class="mini-bar-chart">
                                    <div class="bar-bg">
                                        <div class="bar-fill" style="width: 3.2%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-header">
                                <span class="metric-title">Naming compliance</span>
                                <div class="tooltip-trigger">
                                    <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                        <circle cx="12" cy="12" r="10"/>
                                        <path d="M9 9h5v5"/>
                                        <path d="M15 9l-6 6"/>
                                    </svg>
                                    <div class="tooltip">From Naming-Rules.xlsx</div>
                                </div>
                            </div>
                            <div class="metric-content">
                                <div class="metric-value">94% OK</div>
                                <div class="mini-doughnut">
                                    <svg viewBox="0 0 32 32">
                                        <circle class="mini-doughnut-bg" cx="16" cy="16" r="14.5"/>
                                        <circle class="mini-doughnut-progress" cx="16" cy="16" r="14.5" 
                                               style="stroke-dashoffset: 5.46"/>
                                    </svg>
                                </div>
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-header">
                                <span class="metric-title">Title-block compliance</span>
                                <div class="tooltip-trigger">
                                    <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                        <circle cx="12" cy="12" r="10"/>
                                        <path d="M9 9h5v5"/>
                                        <path d="M15 9l-6 6"/>
                                    </svg>
                                    <div class="tooltip">From Title-Blocks.xlsx</div>
                                </div>
                            </div>
                            <div class="metric-content">
                                <div class="metric-value">89% OK</div>
                                <div class="mini-doughnut">
                                    <svg viewBox="0 0 32 32">
                                        <circle class="mini-doughnut-bg" cx="16" cy="16" r="14.5"/>
                                        <circle class="mini-doughnut-progress" cx="16" cy="16" r="14.5"
                                               style="stroke-dashoffset: 10.03"/>
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Results Viewer -->
        <div id="results-viewer" class="card fade-slide-in hidden">
            <div class="card-header results-header">
                <h2 class="card-title">Results</h2>
                <div class="results-controls">
                    <div class="search-container">
                        <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <circle cx="11" cy="11" r="8"/>
                            <path d="m21 21-4.35-4.35"/>
                        </svg>
                        <input type="text" id="search-input" placeholder="Search results..." class="search-input">
                    </div>
                    <button id="download-btn" class="btn btn-outline">
                        <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7,10 12,15 17,10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                        Download XLSX Report
                    </button>
                </div>
            </div>
            <div class="card-content">
                <!-- Segmented Control -->
                <div class="segmented-control">
                    <button class="segment active" data-tab="missing">Missing Files</button>
                    <button class="segment" data-tab="naming">Naming Errors</button>
                    <button class="segment" data-tab="titleblock">Title-Block Errors</button>
                    <button class="segment" data-tab="all">All Findings</button>
                </div>

                <!-- Tab Content -->
                <div class="tab-content">
                    <div id="missing-tab" class="tab-pane active">
                        <div class="table-container">
                            <table class="results-table">
                                <thead>
                                    <tr>
                                        <th>Expected File</th>
                                        <th>Found?</th>
                                        <th>Register Row</th>
                                    </tr>
                                </thead>
                                <tbody id="missing-tbody"></tbody>
                            </table>
                        </div>
                    </div>

                    <div id="naming-tab" class="tab-pane">
                        <div class="table-container">
                            <table class="results-table">
                                <thead>
                                    <tr>
                                        <th>Folder Path</th>
                                        <th>File Name</th>
                                        <th>Error Type</th>
                                        <th>Details</th>
                                    </tr>
                                </thead>
                                <tbody id="naming-tbody"></tbody>
                            </table>
                        </div>
                    </div>

                    <div id="titleblock-tab" class="tab-pane">
                        <div class="table-container">
                            <table class="results-table">
                                <thead>
                                    <tr>
                                        <th>Sheet No</th>
                                        <th>Sheet Name</th>
                                        <th>File Name</th>
                                        <th>Rev Code</th>
                                        <th>Rev Date</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody id="titleblock-tbody"></tbody>
                            </table>
                        </div>
                    </div>

                    <div id="all-tab" class="tab-pane">
                        <div class="table-container">
                            <table class="results-table">
                                <thead>
                                    <tr>
                                        <th>Check Type</th>
                                        <th>File Name</th>
                                        <th>Status</th>
                                        <th>Comment</th>
                                    </tr>
                                </thead>
                                <tbody id="all-tbody"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="main.js"></script>
</body>
</html>